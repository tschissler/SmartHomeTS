apiVersion: v1
kind: ConfigMap
metadata:
  name: {{ .Release.Name }}-config
  namespace: {{ .Release.Namespace }}
  labels:
    app: {{ .Chart.Name }}
    release: {{ .Release.Name }}
data:
  # InfluxDB Configuration
  SMARTHOME__INFLUX3_URL: {{ .Values.config.influxUrl | quote }}
  SMARTHOME__INFLUXDB_ORG: {{ .Values.config.org | quote }}
  
  # Environment Configuration
  SMARTHOME__DATAHUB_ENVIRONMENT: {{ .Values.config.environment | quote }}
  
  # MQTT Configuration
  SMARTHOME__MQTT_BROKER: {{ .Values.config.mqttBroker | quote }}
  SMARTHOME__MQTT_PORT: {{ .Values.config.mqttPort | quote }}
  # Read interval in milliseconds
  SMARTHOME__READ_INTERVAL_MS: {{ .Values.config.readIntervalMs | quote }}
  # Health check HTTP server port
  SMARTHOME__HEALTH_CHECK_PORT: {{ .Values.config.healthCheckPort | quote }}
